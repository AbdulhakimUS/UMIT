<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- font-awesome cdn -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- favicon (ICO в корне для надёжности) -->
    <link rel="icon" href="favicon.ico" type="image/x-icon" />

    <!-- дополнительные favicon в папке -->
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="favicon_io/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="favicon_io/favicon-16x16.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="favicon_io/apple-touch-icon.png"
    />
    <link rel="manifest" href="favicon_io/site.webmanifest" />

    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />

    <!-- supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabaseClient.js"></script>

    <!-- css -->
    <link rel="stylesheet" href="style.css" />

    <!-- js -->
    <script src="script.js" defer></script>
    <script src="profile.js" defer></script>

    <title>UMIT</title>
  </head>
  <body>
    <!-- Product Modal -->
    <div
      class="product-modal-overlay"
      id="productOverlay"
      onclick="closeProductModal()"
    ></div>
    <div class="product-modal" id="productModal">
      <div class="product-modal-content">
        <div class="product-modal-header">
          <button class="product-modal-close" onclick="closeProductModal()">
            <i class="fa-solid fa-chevron-left"></i>
          </button>
          <span class="product-modal-name" id="modalProductName"></span>
          <div class="product-modal-actions">
            <button><i class="fa-regular fa-heart"></i></button>
            <button><i class="fa-solid fa-share-nodes"></i></button>
          </div>
        </div>

        <div style="position: relative">
          <img class="product-modal-image" id="modalMainImage" src="" alt="" />
          <span
            class="product-modal-discount"
            id="modalDiscount"
            style="display: none"
          ></span>
        </div>

        <div class="product-modal-thumbs" id="modalThumbs"></div>

        <div class="product-modal-info">
          <div class="product-modal-rating">
            <div class="product-modal-rating-box">
              <span id="modalRating">4.7</span>
              <div class="stars">
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
              </div>
            </div>
            <span class="product-modal-reviews-count" id="modalReviewsCount"
              >182 отзыва</span
            >
          </div>

          <h2 class="product-modal-title" id="modalTitle"></h2>

          <div class="product-modal-sizes">
            <p class="product-modal-label">Размер:</p>
            <div class="product-modal-sizes-list" id="modalSizes"></div>
          </div>

          <div class="product-modal-desc">
            <p class="product-modal-label">Описание:</p>
            <p class="product-modal-desc-text" id="modalDescription"></p>
          </div>

          <div class="product-modal-reviews-section">
            <div class="product-modal-reviews-header">
              <span>Отзывы</span>
              <a
                href="#"
                onclick="openReviewModal(); closeProductModal(); return false;"
                >Все отзывы</a
              >
            </div>
            <div class="product-modal-reviews-list" id="modalReviewsList"></div>
          </div>
        </div>

        <div class="product-modal-footer">
          <div>
            <span class="product-modal-price" id="modalPrice"></span>
            <span class="product-modal-oldprice" id="modalOldPrice"></span>
          </div>
          <button class="product-modal-cart-btn" onclick="addToCartFromModal()">
            <i class="fa-solid fa-cart-shopping"></i>
            В корзину
          </button>
        </div>
      </div>
    </div>

    <nav>
      <div class="navbar navbar-container">
        <div class="left-navbar">
          <img src="./img/logo 2.png" alt="" class="navbar-brand-img" />
          <h1 class="navbar-brand-h1">UMIT</h1>
        </div>
        <div class="center-navbar">
          <a href="#" class="nav-link">Главная</a>
          <a href="#catalog" class="nav-link">Каталог</a>
          <a href="#review" class="nav-link">Отзывы</a>
          <a href="#contact" class="nav-link">Контакты</a>
        </div>
        <div class="right-navbar">
          <div class="hamburger" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
          </div>
          <i class="fa-solid fa-user" id="userIcon"></i>
          <a href="./shop/shop.html" class="cart-icon">
            <i class="fa-solid fa-cart-shopping" id="cart-icon"></i>
            <span id="cart-count">0</span>
          </a>
        </div>
      </div>
    </nav>

    <div id="profileModal" class="profile-modal">
      <div class="profile-modal-content">
        <span class="profile-close">&times;</span>
        <h2>Регистрация</h2>
        <form id="profileForm">
          <div class="form-group">
            <label for="firstName">Имя</label>
            <input type="text" id="firstName" placeholder="Введите имя" />
          </div>

          <div class="form-group">
            <label for="lastName">Фамилия</label>
            <input type="text" id="lastName" placeholder="Введите фамилию" />
          </div>

          <div class="form-group">
            <label for="phone">Телефон</label>
            <input type="tel" id="phone" placeholder="+998998887766" />
          </div>

          <div class="form-group">
            <label for="telegram">Telegram</label>
            <input
              type="text"
              id="telegram"
              placeholder="@username"
              autocomplete="off"
            />
          </div>

          <div class="form-group">
            <label for="address">Адрес</label>
            <div class="address-input">
              <input type="text" id="address" placeholder="Ваш адрес" />
              <button
                type="button"
                id="geoBtn"
                class="geo-btn"
                title="Определить по геолокации"
              >
                <i class="fa-solid fa-location-dot"></i>
              </button>
            </div>
          </div>

          <div class="form-group">
            <label for="extra">Доп. информация</label>
            <textarea id="extra" placeholder="Комментарий к заказу"></textarea>
          </div>

          <button type="submit" class="submit-btn">Сохранить</button>
        </form>
      </div>
    </div>

    <div id="preloader">
      <div class="loader"></div>
    </div>

    <section id="home" class="home-section">
      <div class="home-container">
        <div class="center-home">
          <h2 class="home-h2" data-content="hero_title">
            Новая<br />
            коллекция
          </h2>
          <div class="center-home-text">
            <h5 class="center-home-text-h5" data-content="hero_subtitle">
              мужская коллекция
            </h5>

            <hr />
            <div class="buttons-home">
              <a href="#catalog" class="btn btn-primary">Смотреть каталог</a>
            </div>
          </div>
          <div class="mouse-home">
            <div class="scroll-home"></div>
          </div>
        </div>
      </div>
    </section>

    <section id="catalog">
      <div class="catalog-container">
        <div class="catalog-header">
          <h2 class="catalog-h2" data-content="catalog_title">
            Новые поступления
          </h2>

          <!-- Поиск -->
          <div class="search-box">
            <input
              type="text"
              id="search-input"
              placeholder="Поиск товаров..."
            />
            <i class="fa-solid fa-magnifying-glass" id="search-icon"></i>
          </div>
        </div>
        <div class="products" id="product-list">
          <!-- Товары загружаются динамически из Supabase -->
          <div class="loading">Загрузка товаров...</div>
        </div>

        <div class="buttons-catalog">
          <button class="show-more catalog-button" id="showMoreBtn">
            Посмотреть ещё
          </button>
          <button
            class="close catalog-button"
            id="closeBtn"
            style="display: none"
          >
            Закрыть товары
          </button>
        </div>
      </div>
    </section>

    <section id="review">
      <div class="review-container">
        <h2 class="review-title" data-content="reviews_title">
          Отзывы покупателей
        </h2>

        <div class="review-grid">
          <div class="review-card">
            <div class="review-header">
              <div class="review-avatar">А</div>
              <div class="review-stars">
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
              </div>
            </div>
            <p class="review-text">
              Очень тёплый и стильный. Качество отличное, рекомендую!
            </p>
            <p class="review-name">Алексей К.</p>
            <p class="review-date">2 дня назад</p>
          </div>
          <div class="review-card">
            <div class="review-header">
              <div class="review-avatar">С</div>
              <div class="review-stars">
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star-half-stroke"></i>
              </div>
            </div>
            <p class="review-text">
              Быстрая доставка и отличное качество материала.
            </p>
            <p class="review-name">Сергей М.</p>
            <p class="review-date">5 дней назад</p>
          </div>
          <div class="review-card">
            <div class="review-header">
              <div class="review-avatar">В</div>
              <div class="review-stars">
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
              </div>
            </div>
            <p class="review-text">
              Покупал пальто для работы. Сидит идеально!
            </p>
            <p class="review-name">Владимир С.</p>
            <p class="review-date">1 неделю назад</p>
          </div>
          <div class="review-card">
            <div class="review-header">
              <div class="review-avatar">Д</div>
              <div class="review-stars">
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
              </div>
            </div>
            <p class="review-text">Супер качество! Буду заказывать ещё.</p>
            <p class="review-name">Дильшод Р.</p>
            <p class="review-date">2 недели назад</p>
          </div>
        </div>
        <button class="review-button" onclick="openReviewModal()">
          Посмотреть все отзывы
        </button>
      </div>
    </section>

    <footer id="contact">
      <div class="footer">
        <div class="footer-top">
          <div class="footer-column footer-logo">
            <h2 class="footer-brand">
              <img src="./img/logo 2.png" alt="" width="15px" /> UMIT
            </h2>
            <p class="footer-description" data-content="footer_description">
              Лучшие товары, качественное обслуживание и быстрая доставка по
              Узбекистану.
            </p>
            <div class="footer-socials">
              <a href="#" class="footer-social"
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a href="#" class="footer-social"
                ><i class="fab fa-instagram"></i
              ></a>
              <a href="#" class="footer-social"
                ><i class="fab fa-telegram-plane"></i
              ></a>
              <a href="#" class="footer-social"
                ><i class="fab fa-whatsapp"></i
              ></a>
            </div>
          </div>

          <div class="footer-column">
            <h3 class="footer-title">Навигация</h3>
            <ul class="footer-links">
              <li><a href="#home">Главная</a></li>
              <li><a href="#catalog">Каталог</a></li>
              <li><a href="#review">Отзывы</a></li>
              <li><a href="#contact">Контакты</a></li>
            </ul>
          </div>

          <div class="footer-column">
            <h3 class="footer-title">Полезно</h3>
            <ul class="footer-links">
              <li><a href="#">Часто задаваемые вопросы</a></li>
              <li><a href="#">Гарантия</a></li>
              <li><a href="#">Обмен и возврат</a></li>
              <li><a href="#">Новости</a></li>
              <li><a href="#">Политика конфиденциальности</a></li>
            </ul>
          </div>

          <div class="footer-column">
            <h3 class="footer-title">Контакты</h3>
            <ul class="footer-contact">
              <li>
                <i class="fas fa-map-marker-alt"></i>
                <a
                  href="https://www.google.com/maps?q=38.276495,67.896032"
                  target="_blank"
                >
                  улица Шарафа Рашидова 195, Денау</a
                >
              </li>
              <li>
                <i class="fas fa-phone"></i>
                <a href="tel:+998885400400">+998 885 400 400</a>
              </li>
              <li>
                <i class="fas fa-envelope"></i>
                <a href="mailto:umit-shop.netlify.app"
                  >umit-online.netlify.app</a
                >
              </li>
              <li><i class="fas fa-clock"></i> Пн-Вс: 9:00-23:00</li>
            </ul>
          </div>
        </div>

        <div class="footer-bottom">
          <p>© 2025 UMIT. Все права защищены.</p>
          <p>
            Developer
            <span
              ><a href="https://t.me/amonovvv_a" target="_blank"
                >amonovvv_a</a
              ></span
            >
          </p>
        </div>
      </div>
    </footer>
    <div class="mobile-backdrop"></div>
  </body>
</html>
